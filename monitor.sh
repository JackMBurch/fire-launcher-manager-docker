FIRE_PORT="${FIRE_PORT:-5555}" FIRE_LAUNCHER="${FIRE_LAUNCHER:-com.amazon.tv.leanbacklauncher/.MainActivity}" && (adb devices | grep -q "$FIRE_IP:$FIRE_PORT\b" || { adb connect $FIRE_IP:$FIRE_PORT | grep -q "connected to $FIRE_IP:$FIRE_PORT\|failed to authenticate to $FIRE_IP:$FIRE_PORT" && echo "Attempted connection, approve prompt on your TV" || (echo "Failed to attempt connection, please check device IP & port" && exit 1) ; }) && echo "Waiting for button presses..." && adb logcat '*:I' | grep --line-buffered "HomeActivity_vNext: Received a Home Intent" | xargs -I {} adb shell am start -n $FIRE_LAUNCHER
